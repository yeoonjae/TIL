# **@Aspect ν”„λ΅μ‹**

## **@Aspect ν”„λ΅μ‹λ€?**

μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ…μ— ν”„λ΅μ‹λ¥Ό μ μ©ν•κΈ° μ„ν•΄μ„  `ν¬μΈνΈμ»· + μ–΄λ“λ°”μ΄μ¤` λ΅ κµ¬μ„±λμ–΄μλ” μ–΄λ“λ°”μ΄μ €λ¥Ό λ§λ“¤μ–΄μ„ μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅ν•λ©΄ μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°(`AnnotationAwareAspectJAutoProxyCreator`)κ°€ λ¨λ‘ μλ™μΌλ΅ μ²λ¦¬ν•΄μ¤λ‹λ‹¤. 

μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°(`AnnotationAwareAspectJAutoProxyCreator`)λ” μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅λ μ–΄λ“λ°”μ΄μ €λ“¤μ„ λ¨λ‘ μ°Ύκ³ , μ¤ν”„λ§ λΉλ“¤μ— μλ™μΌλ΅ ν”„λ΅μ‹λ¥Ό μ μ©μ‹μΌμ¤λ‹λ‹¤. 

μ¤ν”„λ§μ€ `@Aspect` μ–΄λ…Έν…μ΄μ…μΌλ΅ νΈλ¦¬ν•κ² `ν¬μΈνΈμ»· + μ–΄λ“λ°”μ΄μ¤`λ΅ κµ¬μ„±λ μ–΄λ“λ°”μ΄μ € μƒμ„± κΈ°λ¥μ„ μ§€μ›ν•©λ‹λ‹¤. 

>  `@Aspect`λ” κ΄€μ  μ§€ν–¥ ν”„λ΅κ·Έλλ°(AOP)μ„ κ°€λ¥ν•κ² ν•λ” `AspectJ` ν”„λ΅μ νΈμ—μ„ μ κ³µν•λ” μ–΄λ…Έν…μ΄μ…μ…λ‹λ‹¤. μ¤ν”„λ§μ€ μ΄κ²ƒμ„ μ°¨μ©ν•μ—¬ ν”„λ΅μ‹λ¥Ό ν†µν• AOP λ¥Ό κ°€λ¥ν•κ² ν•©λ‹λ‹¤. 

---
## **@Aspect ν”„λ΅μ‹ λ™μ‘ λ°©μ‹**
```java
@Aspect // @Aspect
public class LogTraceAspect {

  @Around("execution(* hello.proxy.app..*(..))") // ν¬μΈνΈμ»·
  public Object execute(ProceedingJoinPoint joinPoint) throws {
    // Advice λ΅μ§
  }
  
}
```

μ„μ μ½”λ“μ™€ κ°™μ΄ μ–΄λ“λ°”μ΄μ €κ°€ μμµλ‹λ‹¤. μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°(`AnnotationAwareAspectJAutoProxyCreator`)λ” `@Aspect`λ¥Ό μ°Ύμ•„μ„ μ΄κ²ƒμ„ μ–΄λ“λ°”μ΄μ €λ΅ λ§λ“¤μ–΄μ¤λ‹λ‹¤. μ΄λ¦„μ— Annotation~~ μΌλ΅ μ‹μ‘ν•λ” κ²ƒμ²λΌ μ–΄λ…Έν…μ΄μ…μ„ μΈμ‹ν•©λ‹λ‹¤. 

**@Aspect κ°€ μ–΄λ“λ°”μ΄μ €λ΅ λ³€ν™ν•μ—¬ μ €μ¥ν•λ” κ³Όμ •**μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤. 
1. **μ‹¤ν–‰** : μ¤ν”„λ§ μ• ν”λ¦¬μΌ€μ΄μ… λ΅λ”© μ‹μ μ— μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°λ¥Ό νΈμ¶ν•λ‹¤. 
2. **λ¨λ“  `@Aspect` λΉ μ΅°ν**: μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°λ” μ¤ν”„λ§ μ»¨ν…μ΄λ„μ—μ„ `@Aspect` μ• λ…Έν…μ΄μ…μ΄ λ¶™μ€ μ¤ν”„λ§ λΉμ„ λ¨λ‘ μ΅°νν•λ‹¤.
3. **μ–΄λ“λ°”μ΄μ € μƒμ„±**: `@Aspect` μ–΄λ“λ°”μ΄μ € λΉλ”λ¥Ό ν†µν•΄ `@Aspect` μ• λ…Έν…μ΄μ… μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅ μ–΄λ“λ°”μ΄μ €λ¥Ό μƒμ„±ν•λ‹¤.
4. **`@Aspect` κΈ°λ° μ–΄λ“λ°”μ΄μ € μ €μ¥**: μƒμ„±ν• μ–΄λ“λ°”μ΄μ €λ¥Ό `@Aspect` μ–΄λ“λ°”μ΄μ € λΉλ” λ‚΄λ¶€μ— μ €μ¥ν•λ‹¤.

![image](https://user-images.githubusercontent.com/63777714/152910722-38eab2ff-2957-4bec-b81f-54873bda6e8f.png)

> π” **Aspect μ–΄λ“λ°”μ΄μ € λΉλ”** <br>
> Aspect μ–΄λ“λ°”μ΄μ € λΉλ”λ” `BeanFactoryAspectJAdvisorsBuilder` ν΄λμ¤λ΅, `@Aspect`μ μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅ ν¬μΈνΈμ»·, μ–΄λ“λ°”μ΄μ €, μ–΄λ“λ°”μ΄μ¤λ¥Ό μƒμ„±ν•κ³  λ³΄κ΄€ν•λ” κ²ƒμ„ λ‹΄λ‹Ήν•©λ‹λ‹¤. `@Aspect`μ μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅ μ–΄λ“λ°”μ΄μ €λ¥Ό λ°λ“¤κ³ , `@Aspect` μ–΄λ“λ°”μ΄μ € λΉλ” λ‚΄λ¶€ μ €μ¥μ†μ— μΊμ‹ν•©λ‹λ‹¤. μΊμ‹μ— μ–΄λ“λ°”μ΄μ €κ°€ μ΄λ―Έ λ§λ“¤μ–΄μ Έ μλ” κ²½μ°μ—” μ €μ¥λ μ–΄λ“λ°”μ΄μ €λ¥Ό λ°ν™ν•©λ‹λ‹¤. (μ¬μ‚¬μ©)

λ‹¤μμ€ μλ™ ν”„λ΅μ‹ μƒμ„±κΈ°μ μ‘λ™ κ³Όμ •μ„ λ‚νƒ€λ‚Έ κ·Έλ¦Όμ…λ‹λ‹¤. 

![image](https://user-images.githubusercontent.com/63777714/152911657-6796c167-0a4e-44f0-bcb6-5b32d71c2ca6.png)

1. μ¤ν”„λ§ λΉ λ€μƒμ΄ λλ” κ°μ²΄ μƒμ„±
2. μƒμ„±λ κ°μ²΄λ¥Ό λΉ μ €μ¥μ†μ— λ“±λ΅ν•κΈ° **μ „**μ— λΉ ν›„μ²λ¦¬κΈ°μ— μ „λ‹¬
3. Advisor λΉ μ΅°ν & @Aspect Advisor μ΅°ν
4. ν”„λ΅μ‹ μ μ© λ€μƒ μ²΄ν¬ : 3μ—μ„ μ΅°νν• Advisorμ— μλ” ν¬μΈνΈμ»·μ„ μ‚¬μ©ν•μ—¬ ν•΄λ‹Ή κ°μ²΄κ°€ ν”„λ΅μ‹λ¥Ό μ μ©ν•  λ€μƒμΈμ§€ μ•„λ‹μ§€ νλ‹¨
5. ν”„λ΅μ‹ μƒμ„± : ν”„λ΅μ‹ μ μ© λ€μƒμ΄λ©΄ ν”„λ΅μ‹ μƒμ„± ν›„ ν”„λ΅μ‹λ¥Ό λ°ν™, μ•„λ‹ κ²½μ° μ›λ³Έ κ°μ²΄λ¥Ό λ°ν™
6. λ°ν™λ κ°μ²΄λ¥Ό μ¤ν”„λ§ λΉμΌλ΅ λ“±λ΅

---
μ°Έκ³ 
- μ¤ν”„λ§ ν•µμ‹¬ μ›λ¦¬-κ³ κΈ‰νΈ (μΈν”„λ°_κΉ€μν•λ‹)